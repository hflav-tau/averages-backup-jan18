%% -*- mode: LaTeX; TeX-master: "../Summer14.tex" -*-
%%
%% define report tags
%%
\newcommand{\hfagTauTag}{Summer 2014\xspace}
\newcommand{\hfagFitLabel}{HFAG \hfagTauTag fit}

%%--- hevea flag
\newif\ifhevea\heveafalse
%%--- provide \cutname for non-hevea compiling
\providecommand{\cutname}[1]{}

%%--- env to get left aligned eqs
\makeatletter
\newenvironment*{fleqn}[1][\leftmargini minus\leftmargini]{\@fleqntrue
  \setlength\@mathmargin{#1}\ignorespaces
}{%
  \ignorespacesafterend
}

%%--- env to get center aligned eqs
\newenvironment{ceqn}{\@fleqnfalse
  \@mathmargin\@centering \ignorespaces
}{%
  \ignorespacesafterend
}

%%--- env to remove spaces before \cite{} from cite package
\newenvironment{citenoleadsp}{\@fleqnfalse
  \let\cite@adjust\@empty
}{%
  \ignorespacesafterend
}
\makeatother

%%--- be able to cite in math mode
\let\citeOld\cite
\renewcommand{\cite}[1]{\ifmmode\text{\citeOld{#1}}\else\citeOld{#1}\fi}

%%--- env for display math
\newenvironment{ensuredisplaymath}
  {\(\displaystyle}
  {\)}

%%--- bold math with \bfseries
\makeatletter
\DeclareRobustCommand\bfseries{%
  \not@math@alphabet\bfseries\mathbf
  \fontseries\bfdefault\selectfont\boldmath}
\DeclareRobustCommand*{\bm}[1]{%
    \mathchoice{\bmbox{\displaystyle}{#1}}%
               {\bmbox{\textstyle}{#1}}%
               {\bmbox{\scriptstyle}{#1}}%
               {\bmbox{\scriptscriptstyle}{#1}}}
\DeclareRobustCommand*{\bmbox}[2]{\mbox{\bfseries$#1 #2$}}
\makeatother

%%--- normal size captions in longtable
\makeatletter
\def\LT@makecaption#1#2#3{%
  \LT@mcol\LT@cols c{\hbox to\z@{\hss\parbox[t]\LTcapwidth{%
    \sbox\@tempboxa{\normalsize#1{#2: }#3}%
    \ifdim\wd\@tempboxa>\hsize
      \normalsize#1{#2: }#3%
    \else
      \hbox to\hsize{\hfil\box\@tempboxa\hfil}%
    \fi
    \endgraf\vskip\baselineskip}%
  \hss}}}
\makeatother

%%
%% defs for using LaTeX defs from HFAG tau SW
%%
\makeatletter

%%--- define HFAG tau quantity
\newcommand{\htdef}[2]{%
  \@namedef{hfagtau@#1}{#2}%
}

%%--- retrieve HFAG tau quantity
\iffalse
\newcommand{\htuse}[1]{%
  \@nameuse{hfagtau@#1}}%
\else
\newcommand{\htuse}[1]{%
  \ifcsname hfagtau@#1\endcsname
  \@nameuse{hfagtau@#1}%
  \else
  \@latex@error{Undefined name hfagtau@#1}\@eha
  \fi}
\fi

%% \htconstrdef{name}{left}{right}
\newcommand{\htconstrdef}[4]{%
  \@namedef{hfagtau@#1.left}{\ensuremath{#2}}%
  \@namedef{hfagtau@#1.right}{\ensuremath{#3}}%
  \@namedef{hfagtau@#1.right.split}{\ensuremath{#4}}%
  \@namedef{hfagtau@#1.constr.eq}{\htuse{#1.left} ={}& \htuse{#1.right}}%
}

%% \htquantdef{name}{gammaname}{texdescr}{valerr}{val}{err}
\iffalse
\newcommand{\htquantdef}[6]{%
  \@namedef{hfagtau@#1.gn}{\ensuremath{#2}}%
  \@namedef{hfagtau@#1.td}{\ensuremath{#3}}%
  \@namedef{hfagtau@#1}{\ensuremath{#4}}%
  \@namedef{hfagtau@#1.v}{\ensuremath{#5}}%
  \@namedef{hfagtau@#1.e}{\ensuremath{#6}}%
}
\else
\newcommand{\htquantdef}[6]{%
  \ifx&#2&\else
  \@namedef{hfagtau@#1.gn}{\ensuremath{#2}}%
  \fi
  \ifx&#3&\else
  \@namedef{hfagtau@#1.td}{\ensuremath{#3}}%
  \fi
  \ifx&#6&%
    \@namedef{hfagtau@#1}{\ensuremath{#5}}%
  \else
    \ifthenelse{\equal{#6}{0}}{%
      \@namedef{hfagtau@#1}{\ensuremath{#5}}%
    }{%
      \@namedef{hfagtau@#1}{\ensuremath{#4}}%
      \@namedef{hfagtau@#1.v}{\ensuremath{#5}}%
      \@namedef{hfagtau@#1.e}{\ensuremath{#6}}%
    }%
  \fi
}
\fi

%% \htmeasdef{name}{quant}{exp}{ref}{valerr}{val}{err}{syst}
\newcommand{\htmeasdef}[8]{%
  \@namedef{hfagtau@#1,quant}{\ensuremath{#2}}%
  \@namedef{hfagtau@#1,exp}{#3}%
  \@namedef{hfagtau@#1,ref}{\cite{#4}}%
  \@namedef{hfagtau@#1}{\ensuremath{#5}}%
  \@namedef{hfagtau@#1,val}{\ensuremath{#6}}%
  \@namedef{hfagtau@#1,stat}{\ensuremath{#7}}%
  \@namedef{hfagtau@#1,syst}{\ensuremath{#8}}%
}
\makeatother

%%
\input{tau/tau-defs}
\input{tau/tau-br-fit-aleph-hcorr_13}
\input{tau/tau-br-fit-aleph-hcorr_13-vadirect-elab}
\begin{fleqn}
\let\tausection\subsection
\let\tausubsection\subsubsection
\newenvironment{envsmall}%
  {\small}%
  {}
\section{Tau lepton properties}
\label{sec:tau}
\input{tau/tau-sections}
\input{tau/tau-lfv}
\input{tau/tau-lfv-limits-plot}
\input{tau/tau-lfv-combinations}
\input{tau/tau-lfv-combinations-plot}
\let\tausection\subsection
%%--- end
\let\cite\citeOld
\end{fleqn}
